@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

title Sequence Diagram (SD) - US009

autonumber

actor "<b> Customer </b>" as CTM
participant ":ScheduleVisitUI" as UI
participant ":ScheduleVisitController" as CTRL
'participant ":Agency" as AGC
participant ":Agent" as AGT
participant ":Announcement" as ANNOUNCE


activate CTM

    CTM -> UI : asks to schedule a new visit
        activate UI

    UI -> CTRL** : create
        activate CTRL
            ref over CTRL
                Get Available
                Announcements List
            end ref
    CTRL --> UI : availableAnnouncementsList
        deactivate CTRL

    UI --> CTM : shows the list of announcements available
        deactivate UI

    CTM -> UI : selects an announcement
        activate UI

    UI --> CTM : requests data
        deactivate UI

    CTM -> UI : types requested data (visitDate, visitBeginning, visitEnd)
        activate UI

        UI -> CTRL : createVisit(visitDate, visitBeginning, visitEnd)
        activate CTRL

        CTRL -> ANNOUNCE : createVisit(visitDate, visitBeginning, visitEnd)

        activate ANNOUNCE
|||
            ref over ANNOUNCE
            Add Visit to
            Announcement
            end ref

        ANNOUNCE --> CTRL : visit

        deactivate ANNOUNCE

    CTRL -> CTRL : sendConfirmationEmailMessage()
        activate CTRL

    CTRL --> CTRL
    deactivate CTRL

    CTRL --> UI : visit
    deactivate CTRL



    ' FALTA A PARTE DO EMAIL !!!!!!!!!!

    UI --> CTM : displays operation success
        deactivate UI

@enduml